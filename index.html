<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>–ö–∞—Ä—Ç–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üó∫Ô∏è</text></svg>">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>–ö–∞—Ä—Ç–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π</h1>
            <p id="headerDescription">–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç—ã –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π</p>
            <!-- –í—ã–±–æ—Ä —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è (–¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) -->
            <div id="escortSelector" class="escort-selector" style="display: none;">
                <label for="escortSelect">–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ:</label>
                <select id="escortSelect" class="escort-select">
                    <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                </select>
            </div>
        </header>

        <!-- –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ –≤ —Ä–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div id="adminAccess" class="admin-access">
            <button type="button" id="adminLoginBtn" class="btn btn-secondary">üîê –†–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</button>
        </div>

        <!-- –†–µ–∂–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="setupSection" class="setup-section" style="display: none;">
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞) -->
            <div id="escortManagement" class="escort-management" style="display: none;">
                <h3>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è–º–∏</h3>
                <div class="escort-controls">
                    <button id="createEscortBtn" class="btn btn-secondary">‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ</button>
                    <label for="adminEscortSelect">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ:</label>
                    <select id="adminEscortSelect" class="escort-select">
                        <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                    </select>
                </div>
                <div id="currentEscortName" class="current-escort-name" style="display: none;">
                    <div class="escort-name-display">
                        <strong>–¢–µ–∫—É—â–µ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ: <span id="currentEscortNameText"></span></strong>
                        <button id="editEscortNameBtn" class="btn btn-sm btn-secondary">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ</button>
                    </div>
                    <div id="editEscortNameForm" class="edit-escort-name-form" style="display: none;">
                        <input type="text" id="escortNameInput" class="escort-name-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è">
                        <div class="escort-name-buttons">
                            <button id="saveEscortNameBtn" class="btn btn-sm btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            <button id="cancelEscortNameBtn" class="btn btn-sm btn-secondary">‚ùå –û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="admin-info">
                <p>‚ö†Ô∏è –£–∫–∞–∂–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ GitHub:</p>
                <div class="admin-config">
                    <input type="text" id="repoOwner" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è GitHub" value="">
                    <input type="text" id="repoName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è" value="">
                    <input type="password" id="githubToken" placeholder="GitHub Personal Access Token">
                    <button id="saveTokenBtn" class="btn btn-secondary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>
                <p class="help-text">–¢–æ–∫–µ–Ω –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ. –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω: Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Generate new token</p>
            </div>
            <div class="upload-area">
                <h2>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π</h2>
                <div class="upload-grid">
                    <div class="upload-item">
                        <label for="mapInput" class="upload-label">
                            <div class="upload-box">
                                <span class="upload-icon">üó∫Ô∏è</span>
                                <span class="upload-text">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç—É</span>
                            </div>
                            <input type="file" id="mapInput" accept="image/*" hidden>
                        </label>
                        <div id="mapPreview" class="preview"></div>
                    </div>
                </div>

                <h3>–§–æ—Ç–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π</h3>
                <div id="closuresList" class="closures-list">
                    <div class="closure-item">
                        <label class="upload-label">
                            <div class="upload-box-small">
                                <span class="upload-icon">üì∑</span>
                                <span class="upload-text">–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</span>
                            </div>
                            <input type="file" class="closure-photo-input" accept="image/*" multiple data-number="1" hidden>
                        </label>
                        <div class="closure-info">
                            <input type="text" class="closure-name-input" placeholder="–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ 1" value="–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ 1" data-number="1">
                            <div class="closure-preview"></div>
                        </div>
                    </div>
                </div>
                <button id="addClosureBtn" class="btn btn-secondary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ</button>
            </div>

            <div class="actions">
                <button id="saveSetupBtn" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
                <div id="autoSaveStatus" class="auto-save-status" style="display: none;">
                    <span>üíæ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É" –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ GitHub.</span>
                </div>
            </div>
        </div>

        <!-- –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
        <div id="viewSection" class="view-section" style="display: none;">
            <div class="map-display">
                <h2>–ö–∞—Ä—Ç–∞</h2>
                <div id="mapContainer" class="map-container">
                    <img id="mapImage" src="" alt="–ö–∞—Ä—Ç–∞" style="display: none;">
                </div>
            </div>

            <div class="closures-buttons">
                <h2>–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏—è</h2>
                <div id="closuresButtons" class="closures-buttons-grid"></div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalTitleContainer" class="modal-title-container">
                <h2 id="modalTitle" class="modal-title">–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ</h2>
                <input type="text" id="modalTitleInput" class="modal-title-input" style="display: none;" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è">
                <button id="editTitleBtn" class="btn-icon" style="display: none;" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ">‚úèÔ∏è</button>
                <button id="saveTitleBtn" class="btn-icon" style="display: none;" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ">‚úÖ</button>
            </div>
            <div class="photo-controls">
                <button id="prevPhoto" class="nav-btn">‚Äπ</button>
                <div class="photo-container">
                    <div id="photoGallery" class="photo-gallery"></div>
                </div>
                <button id="nextPhoto" class="nav-btn">‚Ä∫</button>
            </div>
            <div class="photo-toolbar">
                <span id="photoCounter" class="photo-counter">1 / 1</span>
                <div class="zoom-hint" style="font-size: 12px; color: #666; margin-left: 10px;">
                    üîç –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è ‚Ä¢ –ö–æ–ª–µ—Å–∏–∫–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
                </div>
                <div id="adminPhotoControls" class="admin-photo-controls" style="display: none;">
                    <button id="addPhotoBtn" class="btn btn-sm btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</button>
                    <button id="replacePhotoBtn" class="btn btn-sm btn-secondary">üîÑ –ó–∞–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</button>
                    <button id="deletePhotoBtn" class="btn btn-sm btn-danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ</button>
                    <input type="file" id="replacePhotoInput" accept="image/*" style="display: none;">
                    <input type="file" id="addPhotoInput" accept="image/*" multiple style="display: none;">
                </div>
            </div>
        </div>
    </div>

    <!-- –û–≤–µ—Ä–ª–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>–ò–¥—ë—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h2>
            <p>–°–∞–π—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</p>
            <p class="loading-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...</p>
        </div>
    </div>

    <script src="script.js?v=2"></script>
</body>
</html>
